<div class="coffee-detail">
  <!-- Header -->
  <div class="header">
    <button class="header-actions" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <span class="title">Detalhes</span>
    <button class="header-actions">
      <mat-icon>favorite_border</mat-icon>
    </button>
  </div>


  <div class="produt-info" *ngIf="coffee$ | async as coffee; else loading">
    <div class="image-container">
      <img [src]="coffee.image" [alt]="coffee.name" />
    </div>
      <div class="info">
      <div class="infos-divider">
        <h2>{{coffee.name}}</h2>
        <span class="sub">{{coffee.type}}</span>

        <div class="rating">
          <mat-icon class="star">star</mat-icon>
          <span>{{coffee.rating}} <span class="reviews">{{coffee.reviews}}</span></span>
        </div>
      </div>
      
      <div class="icons-divider">
        <div class="icons">
        <mat-icon>delivery_dining</mat-icon>
        <mat-icon>coffee</mat-icon>
        <mat-icon>local_drink</mat-icon>
        </div>
      </div>
    </div>
    <hr />

    <div class="description">
      <h3>Descrição</h3>
      <p>
        {{coffee.description}}
      </p>
    </div>

    <div class="size">
      <h3>Tamanho</h3>
      <div class="options">
        <button
          mat-stroked-button
          class="size-btn selected"
          [class.selected]="selectedSize === 'P'"
          (click)="selectSize('P', coffee.price)"
        >
          P
        </button>

        <button
          mat-stroked-button
          class="size-btn"
          [class.selected]="selectedSize === 'M'"
          (click)="selectSize('M', coffee.price * 1.2)"
        >
          M
        </button>

        <button
          mat-stroked-button
          class="size-btn"
          [class.selected]="selectedSize === 'G'"
          (click)="selectSize('G', coffee.price * 1.4)"
        >
          G
        </button>
      </div>
    </div>

    <div class="footer">
      <div class="price">
        <span class="label">Preço</span>
        <h2>R$ {{finalPrice | number: '1.2-2'}}</h2>
      </div>
      <button mat-flat-button color="primary" class="buy-btn" (click)="onBuy(coffee)">Comprar</button>
    </div>
  </div>

  
<ng-template #loading>
  <p style="text-align:center;">Carregando...</p>
</ng-template>
</div>